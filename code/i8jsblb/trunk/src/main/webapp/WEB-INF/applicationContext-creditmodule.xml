<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	     xmlns:tx="http://www.springframework.org/schema/tx"
	     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

  <!-- Service -->
  <bean id="retHeadRetCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.RetHeadRetCreditManagerImpl">
        <property name="transactionDAO">
          <ref bean="transactionDAO"/>
        </property>
        <property name="retailerContactDAO">
          <ref bean="retailerContactDAO"/>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="retRetCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.RetRetCreditManagerImpl">
        <property name="transactionDAO">
          <ref bean="transactionDAO"/>
        </property>
        <property name="retailerContactDAO">
          <ref bean="retailerContactDAO"/>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="inov8DistributorCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.Inov8DistributorCreditManagerImpl">
        <property name="transactionDAO">
          <ref bean="transactionDAO"/>
        </property>
        <property name="distributorContactDAO">
          <ref bean="distributorContactDAO"/>
        </property>
        <property name="operatorDAO">
          <ref bean="operatorDAO"/>
        </property>
      </bean>
    </property>
  </bean>

  <bean id="distDistCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.DistDistCreditManagerImpl">
        <property name="distributorContactDAO">
          <ref bean="distributorContactDAO"/>
        </property>
      </bean>
    </property>
  </bean>


  <bean id="retCustomerCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.RetCustomerCreditManagerImpl">
        <property name="retailerContactDAO">
          <ref bean="retailerContactDAO"/>
        </property>
      </bean>
    </property>
  </bean>
  <bean id="inov8CustomerCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.Inov8CustomerCreditManagerImpl">
      <!--
        <property name="operatorManager">
          <ref bean="operatorManager"/>
        </property>
        -->
      </bean>
    </property>
  </bean>
  <bean id="distRetCreditManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.DistRetCreditManagerImpl">
        <property name="distributorContactDAO">
          <ref bean="distributorContactDAO"/>
        </property>
        <property name="retailerContactDAO">
          <ref bean="retailerContactDAO"/>
        </property>
      </bean>
    </property>
  </bean>
  
  <bean id="creditInfoManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.creditmodule.CreditInfoManagerImpl">
        <property name="creditInfoDAO">
          <ref bean="creditInfoListViewDAO"/>
        </property>
      </bean>
    </property>
  </bean>
   <bean id="creditInfoListViewDAO" class="com.inov8.microbank.server.dao.creditmodule.hibernate.CreditInfoListViewHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>
  
  
  

  <!-- Facade -->
  <bean id="creditFacade" class="com.inov8.microbank.server.facade.CreditFacadeImpl">
    <property name="frameworkExceptionTranslator">
            <ref bean="frameworkExceptionTranslator"/>
    </property>
    <property name="retRetCreditManager">
      <ref local="retRetCreditManager"/>
    </property>
    <property name="retHeadRetCreditManager">
      <ref local="retHeadRetCreditManager"/>
    </property>
    <property name="inov8DistributorCreditManager">
      <ref local="inov8DistributorCreditManager"/>
    </property>
    <property name="distDistCreditManager">
      <ref local="distDistCreditManager"/>
    </property>
    <property name="distRetCreditManager">
      <ref local="distRetCreditManager"/>
    </property>
    <property name="creditInfoManager">
      <ref local="creditInfoManager"/>
    </property>
    
    
  </bean>

  <!-- Definition of Bean -->

  <!--
  <bean id="creditTransferTransaction" class="com.inov8.microbank.server.service.workflow.credittransfer.CreditTransferTransaction" abstract="true">
    <property name="transactionManager">
      <ref  bean="transactionFacade"/>
    </property>
  </bean>

  <bean id="operatorToDistributorTransaction" class="com.inov8.microbank.server.service.workflow.credittransfer.OperatorToDistributorTransaction">
    <property name="inov8DistributorCreditManager">
      <ref local="creditFacade"/>
    </property>
    <property name="transactionManager">
      <ref  bean="transactionFacade"/>
    </property>
  </bean>

  <bean id="distributorToDistributorTransaction" class="com.inov8.microbank.server.service.workflow.credittransfer.DistributorToDistributorTransaction">
    <property name="distDistCreditManager">
      <ref local="creditFacade"/>
    </property>
    <property name="transactionManager">
      <ref  bean="transactionFacade"/>
    </property>
  </bean>

  <bean id="retailerToRetailerTransaction" class="com.inov8.microbank.server.service.workflow.credittransfer.RetailerToRetailerTransaction">
    <property name="retRetCreditManager">
      <ref local="creditFacade"/>
    </property>
    <property name="failureReasonManager">
      <ref bean="failureReasonManager"/>
    </property>
    <property name="failureLogManager">
      <ref bean="failureLogManager"/>
    </property>
    <property name="transactionManager">
      <ref  bean="transactionFacade"/>
    </property>
  </bean>
  <bean id="distributorToRetailerTransaction" class="com.inov8.microbank.server.service.workflow.credittransfer.DistributorToRetailerTransaction">
    <property name="distRetCreditManager">
      <ref local="creditFacade"/>
    </property>
  </bean>
  -->

</beans>
