<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	     xmlns:tx="http://www.springframework.org/schema/tx"
	     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">


<!-- DAO -->


  <bean id="mnoUserListViewDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoUserListViewHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

  <bean id="mnoDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

   <bean id="mnoListViewDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoListViewHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

  <bean id="mnoUserDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoUserHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>
  <bean id="appUserDAO" class="com.inov8.microbank.server.dao.securitymodule.hibernate.AppUserHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>
  <bean id="mnoSupplierListViewDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoSupplierListViewHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>
  
 <bean id="mnoDialingCodeListViewDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoDialingCodeListViewHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>
  
  <bean id="mnoDialingCodeDAO" class="com.inov8.microbank.server.dao.mnomodule.hibernate.MnoDialingCodeHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

  <bean id="concernPartnerDAO" class="com.inov8.microbank.server.dao.portal.concernmodule.hibernate.ConcernPartnerHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>  

  <bean id="partnerDAO" class="com.inov8.microbank.server.dao.usergroupmodule.hibernate.PartnerHibernateDAO">
	   <property name="sessionFactory" ref="sessionFactory"/>
  </bean>  

  <bean id="partnerPermissionGroupDAO" class="com.inov8.microbank.server.dao.usergroupmodule.hibernate.PartnerPermissionGroupHibernateDAO">
	   <property name="sessionFactory" ref="sessionFactory"/>
  </bean>  

<!-- Service -->

    <bean id="mnoUserManager" parent="baseTransactionProxy">
		<property name="target">
			<bean class="com.inov8.microbank.server.service.mnomodule.MnoUserManagerImpl">
				<property name="appUserPartnerGroupDAO" ref="appUserPartnerGroupDAO"/>
				<property name="mnoUserDAO">
					<ref local="mnoUserDAO"/>
				</property>
                <property name="mnoUserListViewDAO">
					<ref local="mnoUserListViewDAO"/>
				</property>
                <property name="appUserDAO">
                     <ref local="appUserDAO"/>
                </property>
			</bean>
		</property>
	</bean>

      <bean id="mnoManager" parent="baseTransactionProxy">
		<property name="target">
			<bean class="com.inov8.microbank.server.service.mnomodule.MnoManagerImpl">
				<property name="mnoDAO">
					<ref local="mnoDAO"/>
				</property>
                <property name="mnoListViewDAO">
					<ref local="mnoListViewDAO"/>
				</property>
				<property name="genericDAO" ref="genericHibernateDAO"/>
		        <property name="concernPartnerDAO">
		          <ref local="concernPartnerDAO"/>
		        </property>				
		       <property name="partnerDAO">
        		  <ref local="partnerDAO"/>
       			</property>
       		   <property name="partnerPermissionGroupDAO">
          			<ref local="partnerPermissionGroupDAO"/>
       		   </property>
           	</bean>
		</property>
	</bean>

<bean id="mnoDialingCodeManager" parent="baseTransactionProxy">
		<property name="target">
			<bean class="com.inov8.microbank.server.service.mnomodule.MnoDialingCodeManagerImpl">
				<property name="mnoDialingCodeDAO">
					<ref local="mnoDialingCodeDAO"/>
				</property>
                                <property name="mnoDialingCodeListViewDAO">
					<ref local="mnoDialingCodeListViewDAO"/>
				</property>
                               	</bean>
		</property>
	</bean>

<!-- Facade -->

  <bean id="mnoFacade" class="com.inov8.microbank.server.facade.MnoFacadeImpl">
    <property name="frameworkExceptionTranslator">
      <ref bean="frameworkExceptionTranslator"/>
    </property>
        <property name="mnoUserManager">
      <ref local="mnoUserManager"/>
    </property>
     <property name="mnoManager">
      <ref local="mnoManager"/>
    </property>
    
    <property name="mnoDialingCodeManager">
      <ref local="mnoDialingCodeManager"/>
    </property>
  </bean>

</beans>
