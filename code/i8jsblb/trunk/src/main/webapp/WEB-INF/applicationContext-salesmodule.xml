<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	     xmlns:tx="http://www.springframework.org/schema/tx"
	     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">


<!-- DAO -->


  <bean id="salesListViewDAO" class="com.inov8.microbank.server.dao.portal.sales.hibernate.SalesListViewHibernateDAOImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

  <bean id="salesDAO" class="com.inov8.microbank.server.dao.portal.sales.hibernate.SalesHibernateDAOImpl">
       <property name="sessionFactory" ref="sessionFactory"/>
       </bean>
       <bean id="transactionDAO" class="com.inov8.microbank.server.dao.transactionmodule.hibernate.TransactionHibernateDAO">
       <property name="sessionFactory" ref="sessionFactory"/>
       </bean>


<!-- Service -->

  <bean id="salesManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.portal.sales.SalesManagerImpl">

        <property name="salesListViewDAO">
          <ref local="salesListViewDAO"/>
        </property>
        <property name="salesDAO">
        <ref local="salesDAO"/>
        </property>
         <property name="transactionDAO">
        	<ref local="transactionDAO"/>
        </property>
        <property name="genericHibernateDAO"  ref="genericHibernateDAO" />
        <property name="actionLogManager"  ref="actionLogManager" />
		<property name="userDeviceAccountsDAO"  ref="userDeviceAccountsDAO" />
      </bean>
    </property>

  </bean>


<!-- Facade -->

  <bean id="salesFacade" class="com.inov8.microbank.server.facade.portal.sales.SalesFacadeImpl">
    <property name="frameworkExceptionTranslator">
      <ref bean="frameworkExceptionTranslator"/>
    </property>
    <property name="salesManager">
      <ref local="salesManager"/>
    </property>

  </bean>

</beans>
