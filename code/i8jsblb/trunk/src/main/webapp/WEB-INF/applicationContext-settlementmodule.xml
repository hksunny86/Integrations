<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	     xmlns:tx="http://www.springframework.org/schema/tx"
	     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">

  <bean id="veriflyDAO" class="com.inov8.microbank.server.dao.settlementmodule.hibernate.VeriflyHibernateDAO">
    <property name="sessionFactory" ref="sessionFactory"/>
  </bean>

  <bean id="settlementTransactionDAO"
	class="com.inov8.microbank.server.dao.dailyjob.SettlementTransactionHibernateDAO">
	<property name="sessionFactory" ref="sessionFactory" />
  </bean>

  <!-- Definition of Service -->
  <bean id="settlementManager" parent="baseTransactionProxy">
    <property name="target">
      <bean class="com.inov8.microbank.server.service.settlementmodule.SettlementManagerImpl">
      
        <property name="veriflyDAO">
          <ref local="veriflyDAO"/>
        </property> 
        <property name="bankManager">
          <ref bean="bankManager"/>
        </property>
        <property name="appUserDAO">
          <ref bean="userDao"/>
        </property>
       <property name="smartMoneyAccountManager">
          <ref bean="smartMoneyAccountManager"/>
        </property>
        <property name="commissionStakeholderDAO">
          <ref bean="commissionStakeholderDAO"/>
        </property>
        <property name="financialIntegrationManager">
	    	<ref bean="financialIntegrationManager"/>
    	</property>
        
        <property name="stakeholderBankInfoDAO">
          <ref bean="stakeholderBankInfoDAO"/>
        </property>
		<property name="allpayCommissionTransactionDAO">
          <ref bean="allpayCommissionTransactionDAO"/>
        </property>
        <property name="inov8DistributorCreditManager">
          <ref bean="inov8DistributorCreditManager"/>
        </property>
        <property name="retHeadRetCreditManager">
          <ref bean="retHeadRetCreditManager"/>
        </property>
        <property name="retRetCreditManager">
          <ref bean="retRetCreditManager"/>
        </property>
        <property name="distDistCreditManager">
          <ref bean="distDistCreditManager"/>
        </property>
        <property name="distRetCreditManager">
          <ref bean="distRetCreditManager"/>
        </property>
        <property name="inov8CustomerCreditManager">
          <ref bean="inov8CustomerCreditManager"/>
        </property>
        <property name="retCustomerCreditManager">
          <ref bean="retCustomerCreditManager"/>
        </property>

        <property name="retailerManager">
          <ref bean="retailerFacade"/>
        </property>
        <property name="distributorManager">
          <ref bean="distributorFacade"/>
        </property>
        <property name="operatorManager">
          <ref bean="operatorFacade"/>
        </property>

        <property name="retailerContactManager">
          <ref bean="retailerFacade"/>
        </property>
        <property name="distributorContactManager">
          <ref bean="distributorFacade"/>
        </property>
        <property name="commissionTransactionDAO">
          <ref bean="commissionTransactionDAO"/>
        </property>
        <property name="switchController">
          <ref bean="switchController"/>
        </property>
        <property name="veriflyController">
          <ref bean="veriflyController"/>
        </property>
		<property name="settlementTransactionDAO">
          <ref local="settlementTransactionDAO"/>
        </property>
	    <property name="stakeholderBankInfoManager">
	    	<ref bean="stakeholderBankInfoManager"/>
	    </property>
     </bean>
    </property>
  </bean>

  <bean id="settlementFacade" class="com.inov8.microbank.server.facade.SettlementFacadeImpl">

          <property name="frameworkExceptionTranslator">
                  <ref bean="frameworkExceptionTranslator"/>
          </property>
          <property name="settlementManager">
                  <ref local="settlementManager"/>
          </property>
  </bean>

</beans>
