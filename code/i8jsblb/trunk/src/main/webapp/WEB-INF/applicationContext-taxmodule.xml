<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd">


	<bean id="taxRegimeDAO" class="com.inov8.microbank.server.dao.portal.taxregimemodule.hibernate.TaxRegimeHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory" />
	</bean>
	
	<bean id="fedRuleDAO" class="com.inov8.microbank.tax.dao.hibernate.FEDRuleHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
		<property name="dataSource" ref="dataSource"/>
	</bean>
	
	<bean id="whtConfigDAO" class="com.inov8.microbank.tax.dao.hibernate.WHTConfigHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>

	<bean id="filerRateConfigDAO" class="com.inov8.microbank.tax.dao.hibernate.FilerRateConfigHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
		<property name="dataSource" ref="dataSource"/>
	</bean>

	<bean id="offlineBillersConfigDAO" class="com.inov8.microbank.tax.dao.hibernate.OfflineBillersConfigHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
		<property name="dataSource" ref="dataSource"/>
	</bean>

	<bean id="whtExemptionDAO" class="com.inov8.microbank.tax.dao.hibernate.WHTExemptionHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
		<bean id="whtExemptionListViewDAO" class="com.inov8.microbank.tax.dao.hibernate.WHTExemptionListViewHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
	<!-- <bean id="fedRuleViewDAO" class="com.inov8.microbank.tax.dao.hibernate.FEDRuleViewHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>-->
	
	<bean id="dailyWhtDeductionDAO" class="com.inov8.microbank.tax.dao.hibernate.DailyWhtDeductionHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	<bean id="whtTrxViewModelDAO" class="com.inov8.microbank.tax.dao.hibernate.WHTTrxViewModelHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean> 
	
	<bean id="whtDeductionSchedularStatusDAO" class="com.inov8.microbank.tax.dao.hibernate.WHTDeductionSchedularStatusHibernateDAO">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean>
	
	 <bean id="taxManager" parent="baseTransactionProxy">
        <property name="target">
            <bean class="com.inov8.microbank.tax.service.TaxManagerImpl">
                <property name="fedRuleDAO" ref="fedRuleDAO"/>
                <property name="whtConfigDAO" ref="whtConfigDAO"/>
                <property name="whtExemptionDAO" ref="whtExemptionDAO"/>
                <property name="whtExemptionListViewDAO" ref="whtExemptionListViewDAO"/>
                <!-- <property name="fedRuleViewDAO" ref="fedRuleViewDAO"/> -->
				<property name="taxRegimeDAO" ref="taxRegimeDAO"/>
				<property name="appUserManager" ref="securityFacade" />
				<property name="transactionManager" ref="transactionModuleManager"/>
				<property name="smartMoneyAccountManager" ref="smartMoneyAccountManager"/>
				<!-- <property name="olaVeriflyFinancialInstitution"
						  ref="com.inov8.microbank.server.service.financialintegrationmodule.OLAVeriflyFinancialInstitutionImpl"/> -->
				<property name="actionLogManager" ref="actionLogManager"/>
				<property name="transactionDetailMasterManager" ref="transactionDetailMasterManager"></property>
				<!-- <property name="productManager" ref="productManager"></property>-->
				<property name="settlementManager" ref="settlementManager"></property>
				<property name="customerManager" ref="customerFacade" />
				<property name="dailyWhtDeductionManager" ref="dailyWhtDeductionManager" /> 
				<property name="userDeviceAccountsManager" ref="userDeviceAccountsManager" />
				<property name="customerDAO" ref="customerDAO"/>
				 <property name="retailerContactDAO" ref="retailerContactDAO"/>
				 <property name="financialIntegrationManager" ref="financialIntegrationManager" />
				<!--<property name="commonCommandManager" ref="commonCommandManager"/>-->
				<property name="whtDeductionSchedularStatusDAO" ref="whtDeductionSchedularStatusDAO"/>
				<property name="dailyWhtDeductionDAO" ref="dailyWhtDeductionDAO" />
				<property name="filerRateConfigDAO" ref="filerRateConfigDAO" />
			</bean>
        </property>
    </bean>

	<bean id="dailyWhtDeductionManager" parent="baseTransactionProxy">
		<property name="target">
			<bean class="com.inov8.microbank.tax.service.DailyWhtDeductionManagerImpl" autowire="byName">
				<property name="dailyWhtDeductionDAO" ref="dailyWhtDeductionDAO" />
				<property name ="transactionManager"   ref="transactionModuleManager" />
				<property name="whtDeductionSchedularStatusDAO" ref="whtDeductionSchedularStatusDAO"/>
				

			</bean>
		</property>
	</bean>

	<bean id="taxRegimeFacade" class="com.inov8.microbank.server.facade.taxregimemodule.TaxRegimeFacadeImpl">
		<property name="frameworkExceptionTranslator">
			<ref bean="frameworkExceptionTranslator"/>
		</property>
		<property name="taxManager">
			<ref local="taxManager"/>
		</property>
		<property name="creditAccountQueingPreProcessor" ref="creditAccountQueingPreProcessor"></property>

	</bean>

	<!--  <bean id="whtDeductionScheduler" class="com.inov8.microbank.tax.job.WHTDeductionScheduler">
		<property name="taxManager" ref="taxManager" />
		<property name="dailyWhtDeductionManager" ref="dailyWhtDeductionManager" />

	</bean> 

	 <bean id="whtDeductionJob" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
		<property name="jobClass" value="com.inov8.microbank.tax.job.WHTDeductionScheduler"/>
		<property name="name" value="${whtDeductionJob.name}"/>
		<property name="durability" value="true"/>
	</bean>

	<bean id="whtDeductionCronTrigger" class="com.inov8.microbank.scheduler.service.PersistableCronTriggerFactoryBean">
		<property name="jobDetail" ref="whtDeductionJob" />
		<property name="cronExpression" value="0 20 17 1/1 * ? *" />   ${whtDeductionCronTrigger.cronExpression}

	</bean>  -->

	 <bean id="dateWiseUserWHTAmountViewDAO" class="com.inov8.microbank.tax.dao.hibernate.DateWiseUserWHTAmountViewHibernateDAO" autowire="byName">
		<property name="sessionFactory" ref="sessionFactory"/>
	</bean> 

</beans>

