<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<h:head>
<link rel="stylesheet" href="#{request.contextPath}/styles/wizard_style.css" type="text/css" />
<link rel="stylesheet" href="#{request.contextPath}/styles/tpc.css" type="text/css" />
<link rel="stylesheet" href="#{request.contextPath}/styles/style_js.css" type="text/css" />
<meta name="title" content="Bulk Upload Franchise" />
<script type="text/javascript" src="#{request.contextPath}/scripts/commonFormValidator.js"></script>
</h:head>
<h:body>
<f:view>
<h:outputStylesheet>
        .top { vertical-align: top; }
        .info { height: 202px; overflow: auto; }
</h:outputStylesheet>

<f:event type="preRenderView"  listener="#{bulkRetailerBean.clearAllSessionObjects}"></f:event>  
<h:form>
		<div id="wizard_group"> 
        	<table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
	                <td id="header_wizard"><h1>Add Franchise Bulk</h1></td>
                </tr>
            	<tr>
                	<td>
                        <div id="status_bar_top">
                        	<table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                  <td width="70%" valign="top" align="left"></td>
                                  <td width="30%" valign="top" align="right">
                                  	<a4j:outputPanel id="icons_div" styleClass="icons_div" style="display:block;float:right;" >
                                        <a4j:commandLink action="#{bulkRetailerBean.clearUploadForm}" title="Clear"
                                            render="errorTable,distributor,region,bulkUpload,createBtn">
                                         <h:graphicImage url="/images/ah_images/icon_clear.png" />   
                                        </a4j:commandLink> 
                                    </a4j:outputPanel>
                                  </td>
                              </tr>
                            </table>
                        </div>
                        
                        
                        <div class="clear"></div>
                    </td>
                </tr>
                <tr>
                	<td >
                    	<div id="content_wrap">
                          <div class="row,error_text_red" style="margin-left: 30px" >
                                <a4j:outputPanel ajaxRendered="true">
                                    <a4j:outputPanel styleClass="error_cont" rendered="#{! empty facesContext.maximumSeverity}">
                                        <a4j:outputPanel>
                                            <a4j:outputPanel styleClass="error_txt" >
                                                <h:messages globalOnly="true" />
                                            </a4j:outputPanel>
                                        </a4j:outputPanel>
                                    </a4j:outputPanel>                
                                </a4j:outputPanel>
                            </div>
                            
                            <table class="upload_con" border="0" align="center" cellpadding="0" cellspacing="10">

                              <tr>
                                    <td width="150" valign="top">Agent Network Name<span class="asterisk">*</span>:</td>
                                    <td width="400" align="left" valign="top">
                                    	<h:selectOneMenu id="distributor" styleClass="type_list" value="#{bulkRetailerBean.retailerModel.distributorId}" title="Agent Network Name">
                                            <f:selectItem itemLabel="[Select]" itemValue="0" />
                                            <f:selectItems value="#{bulkRetailerBean.distributorItems}"/>
                                            <f:ajax listener="#{bulkRetailerBean.onChangeDistributor}" render="errorTable region" event="change"/>
                                        </h:selectOneMenu>
                                    </td>
                              </tr>
                              <tr>      
                                    <td width="150" valign="top">Region<span class="asterisk">*</span>:</td>
                                    <td width="400" align="left" valign="top">
                                    	<h:selectOneMenu id="region" styleClass="type_list" value="#{bulkRetailerBean.retailerModel.regionModelId}" title="Region">
                                            <f:selectItem itemLabel="[Select]" itemValue="0" />
                                            <f:selectItems value="#{bulkRetailerBean.regionItems}"/>
                                        </h:selectOneMenu>
                                    </td>
                              </tr>
                            
                                <tr>
                                    <td width="150" valign="top">Upload CSV File <span class="asterisk">*</span>:</td>
                                    <td width="400" align="left" valign="top">

<h:panelGrid columns="2" columnClasses="top,top">
	<rich:fileUpload fileUploadListener="#{bulkRetailerBean.uploadFile}" id="bulkUpload" acceptedTypes="csv" ontyperejected="alert('Only csv file is permitted');" maxFilesQuantity="1" listHeight="2" render="errorTable">
	</rich:fileUpload>
</h:panelGrid>
                                    </td>
                              </tr>
                              <tr>
                                <td width="150" valign="top" align="right">&nbsp;
                              	</td>
                                <td width="400" align="center" valign="top">
                              		<a4j:outputPanel ajaxRendered="true">
                                		<a4j:commandButton actionListener="#{bulkRetailerBean.validateBulkFranchise}" title="Validate Bulk Franchises"
                                			style="width: 200px; margin-right:10px;" value="Validate Bulk Franchise" styleClass="submit_btn" render="bulkUpload,createBtn,errorTable" id="validateBtn" />
                                		&nbsp;
                                		<a4j:commandButton actionListener="#{bulkRetailerBean.processBulkFranchise}" title="Add Bulk Franchises"
                                			style="width: 180px; margin-right:5px;" value="Add Bulk Franchise" styleClass="submit_btn" render="bulkUpload,errorTable" id="createBtn" rendered="#{bulkRetailerBean.createMode}"/>

                                		<a4j:commandButton actionListener="#{bulkRetailerBean.processBulkFranchise}" title="Add Bulk Franchises"
                                			style="width: 190px; margin-right:5px;" disabled="true" value="Add Bulk Franchise" styleClass="submit_btn_dis" id="createBtnDisabled" rendered="#{!bulkRetailerBean.createMode}"/>
                                			
                                	</a4j:outputPanel>
								</td>
                              </tr>
                          </table>
                          
                          
                          <fieldset>
                   			<legend>Console</legend>
       						<rich:dataTable id="errorTable" width="100%" styleClass="datagrid" headerClass="table_header"
                         		rowClasses="rowodd, roweven" rowKeyVar="rowIndex" value="#{bulkRetailerBean.errorList}" var="error">
                         	<h:column style="text-align:left;" >
                             <f:facet name="header" >
                                 <h:outputText value="Log" />
                             </f:facet>
                             	<h:outputText value="#{error}" />
                         	</h:column>
       						</rich:dataTable>
                   		</fieldset>
                          
                          
                        </div>
                    	
                    </td>
                </tr>
		    

		    	<tr>
                	<td id="status_bar_bottom">
                    	<div>
                            <a4j:outputPanel styleClass="infoMessage" ajaxRendered="true">
                                <h:outputText style="color:#ed1c24;" value="#{infoMessage}"/>
                            </a4j:outputPanel>
                        </div>
                    </td>
                </tr>
                
                
		    	<tr>
                	<td>
                    	<div id="footer">
                    	  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    	    <tr>
                    	      <td width="50%" valign="top" align="left"><h:commandLink styleClass="btn_cancel" value="" action="#{bulkRetailerBean.cancel}"/></td>
                    	      <td width="50%" valign="top" align="right">&nbsp;</td>
                  	      </tr>
                  	    </table>
                    	</div>
                  </td>
                </tr>
            </table>
		</div>
	</h:form>
</f:view>
						<div class="status">
                            <a4j:status>
                                <f:facet name="start">
                                    <h:graphicImage url="/images/ah_images/tabs_loader.gif" style="border:0px;"/>
                                </f:facet>
                                <f:facet name="stop"></f:facet>
                            </a4j:status>
                        </div>
</h:body>
</html>