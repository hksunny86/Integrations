<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<h:head>
<link rel="stylesheet" href="#{request.contextPath}/styles/wizard_style.css" type="text/css" />
<link rel="stylesheet" href="#{request.contextPath}/styles/tpc.css" type="text/css" />
<link rel="stylesheet" href="#{request.contextPath}/styles/style_js.css" type="text/css" />
<meta name="title" content="Agent Hierarchy" />

<style>
.col {
	width: 33%;
}

.centercol {
	width: 33%;
	text-align: center;
}

#content_wrap table {
	margin: 0px auto;
}
</style>


</h:head>
<h:body>
	<f:view>
	<f:event type="preRenderView" listener="#{agentSearchBean.clearAllSessionObjects}"></f:event>
	
		<h:form id="myform">

			<div id="wizard_group">
				<table width="100%" border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td id="header_wizard"><h1>Agent Hierarchy</h1></td>
					</tr>
					<tr>
						<td>
							<div id="status_bar_top">
								<table width="100%" border="0" cellspacing="0" cellpadding="0">
									<tr>
										<td width="70%" valign="top" align="left">&nbsp;</td>
										<td width="30%" valign="top" align="right">
											<a4j:outputPanel id="icons_div" styleClass="icons_div" style="display:block;float:right;">
												<h:outputLink id="viewDetails" value="allpayRetailerAccountDetails.html"
													rendered="#{agentHierarchyActionBean.agentFormModel.editMode and agentHierarchyActionBean.manageAgentsReadAllowed}" 
													title="View Details" >
											    	<f:param name="retailerContactId" value="#{agentHierarchyActionBean.agentFormModel.retailerContactId}" />
											    	<f:param name="appUserId" value="#{agentHierarchyActionBean.agentFormModel.appUserId}" />
											    	<h:graphicImage url="/images/ah_images/view_details_24.png" alt="View Agent Details" />
											    </h:outputLink>
												<h:outputText value="  " />
												<h:commandButton action="#{agentActionBean.editAgent}"
												 rendered="#{agentHierarchyActionBean.agentFormModel.editMode and agentHierarchyActionBean.editSecurityCheck}"
													image="/images/ah_images/edit_bar_icon.png" styleClass="icon_clear" id="editAgent" title="Edit Agent">
													<f:param name="distributorId" value="#{agentHierarchyActionBean.agentFormModel.distributorId}" />
													<f:param name="regionId" value="#{agentHierarchyActionBean.agentFormModel.regionId}" />
													<f:param name="retailerContactId" value="#{agentHierarchyActionBean.agentFormModel.retailerContactId}" />
												</h:commandButton>
												<h:commandButton action="#{agentActionBean.editAgent}"
												 rendered="#{agentHierarchyActionBean.agentFormModel.editMode and !agentHierarchyActionBean.editSecurityCheck}"
													image="/images/ah_images/view_detail_24.png" styleClass="icon_clear" id="viewAgent" title="View Agent">
													<f:param name="distributorId" value="#{agentHierarchyActionBean.agentFormModel.distributorId}" />
													<f:param name="regionId" value="#{agentHierarchyActionBean.agentFormModel.regionId}" />
													<f:param name="retailerContactId" value="#{agentHierarchyActionBean.agentFormModel.retailerContactId}" />
												</h:commandButton>
											</a4j:outputPanel>
										</td>
									</tr>
								</table>
							</div>
							<div class="clear"></div>
						</td>
					</tr>

					<tr>
						<td>
							<div id="content_wrap">
								<div class="row,error_text_red" style="margin-left: 30px">
									<a4j:outputPanel ajaxRendered="true">
										<a4j:outputPanel styleClass="error_cont"
											rendered="#{! empty facesContext.maximumSeverity}">
											<a4j:outputPanel>
												<a4j:outputPanel styleClass="error_txt">
													<h:messages globalOnly="true" />
												</a4j:outputPanel>
											</a4j:outputPanel>
										</a4j:outputPanel>
									</a4j:outputPanel>
								</div>
								<table width="90%" border="0" align="center" cellpadding="0"
									cellspacing="10" class="fieldset_tree">
									<tr>
										<td width="50%" valign="top">

											<fieldset style="margin: 0px; height: 444px;">
												<legend>Agent Hierarchy</legend>
												<rich:tree id="tree" nodeType="#{item.type}" var="item" toggleType="client" 
													value="#{agentHierarchyActionBean.distributorNodes}" 
													selectionChangeListener="#{agentHierarchyActionBean.processSelection}"
													iconCollapsed="/images/ah_images/plus.png"
													iconExpanded="/images/ah_images/minus.png"
													render="agentLevel, areaName, isActive, contactNo, partnerGroup, icons_div, agentId, firstName, lastName, userName, accountNickName"
													selectionType="ajax" >
													<rich:treeNode type="DISTRIBUTOR_NODE" iconExpanded="/images/ah_images/icon_distributor.png" 
														iconCollapsed="/images/ah_images/icon_distributor.png" iconLeaf="/images/ah_images/icon_distributor.png" >
														<h:outputText value="#{item.label}" />
													</rich:treeNode>
													<rich:treeNode type="REGION_NODE" iconExpanded="/images/ah_images/icon_region.png" 
														iconCollapsed="/images/ah_images/icon_region.png" iconLeaf="/images/ah_images/icon_region.png" >
														<h:outputText value="#{item.label}" />
													</rich:treeNode>
													<rich:treeNode type="FRANCHISE_NODE" iconExpanded="/images/ah_images/icon_franchise.png" 
														iconCollapsed="/images/ah_images/icon_franchise.png" iconLeaf="/images/ah_images/icon_franchise.png" >
														<h:outputText value="#{item.label}" />
													</rich:treeNode>
													<rich:treeNode type="AGENT_NODE" iconExpanded="/images/ah_images/icon_agent.png" 
														iconCollapsed="/images/ah_images/icon_agent.png" iconLeaf="/images/ah_images/icon_agent.png" >
														<h:outputText value="#{item.label}" />
													</rich:treeNode>
												</rich:tree>
											</fieldset>

										</td>

										<td width="50%" valign="top">
											<fieldset style="margin: 0px; height: 444px;">
												<legend>Details</legend>
												<table width="" border="0" align="center" cellpadding="0"
													cellspacing="10">
													<tr>
														<td width="170" valign="top">Agent ID:</td>
														<td width="200" align="left" valign="top">
																<h:inputText id="agentId" readonly="true" disabled="true"
																	value="#{agentHierarchyActionBean.agentFormModel.userDeviceAccountUserId }" 
																	styleClass="type_txt" />
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">First Name:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="firstName" readonly="true" disabled="true" value="#{agentHierarchyActionBean.agentFormModel.firstName}" styleClass="type_txt" />		
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Last Name:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="lastName" readonly="true" disabled="true" value="#{agentHierarchyActionBean.agentFormModel.lastName}" styleClass="type_txt" />	
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">User Name:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="userName" readonly="true" disabled="true" value="#{agentHierarchyActionBean.agentFormModel.username}" styleClass="type_txt" />		
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Account Nick Name:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="accountNickName" readonly="true" disabled="true" value="#{agentHierarchyActionBean.agentFormModel.accountNick}" styleClass="type_txt" />	
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Agent Level:</td>
														<td width="200" align="left" valign="top"><h:inputText
																id="agentLevel" readonly="true" disabled="true"
																value="#{agentHierarchyActionBean.agentFormModel.distributorLevelName }"
																styleClass="type_txt" /></td>
													</tr>
													<tr>
														<td width="170" valign="top">Area Name:</td>
														<td width="200" align="left" valign="top"><h:inputText
																id="areaName" readonly="true" disabled="true"
																value="#{agentHierarchyActionBean.agentFormModel.areaName}"
																styleClass="type_txt" /></td>
													</tr>
													<tr>
														<td width="170" valign="top">User Group:</td>
														<td width="200" align="left" valign="top"><h:inputText
																id="partnerGroup" readonly="true" disabled="true"
																value="#{agentHierarchyActionBean.agentFormModel.partnerGroupName}"
																styleClass="type_txt" /></td>
													</tr>
													<tr>
														<td width="170" valign="top">Contact No.:</td>
														<td width="200" align="left" valign="top"><h:inputText
																id="contactNo" readonly="true" disabled="true"
																value="#{agentHierarchyActionBean.agentFormModel.contactNo}"
																styleClass="type_txt" /></td>
													</tr>
													<tr>
														<td width="170" valign="top">Active:</td>
														<td width="200" align="left" valign="top"><h:selectBooleanCheckbox
																id="isActive" disabled="true" 
																value="#{agentHierarchyActionBean.agentFormModel.active}"
																styleClass="type_check" /></td>
													</tr>
												</table>



											</fieldset>
										</td>
									</tr>
								</table>



							</div>

						</td>
					</tr>


					<tr>
						<td id="status_bar_bottom">
							<div>
								<a4j:outputPanel style=""
									styleClass="infoMessage" ajaxRendered="true">
									<h:outputText style="color:#0e385f;" value="#{infoMessage}" />
								</a4j:outputPanel>
							</div>
						</td>
					</tr>


					<tr>
						<td>
							<div id="footer"></div>
						</td>
					</tr>


				</table>
			</div>
		</h:form>
		<div class="status">
	  <a4j:status>
	    <f:facet name="start"  >
	      <h:graphicImage url="/images/ah_images/tabs_loader.gif" style="border:0px;"/>
	    </f:facet>
	    <f:facet name="stop"></f:facet>
	  </a4j:status>
	</div>
	</f:view>
</h:body>
</html>