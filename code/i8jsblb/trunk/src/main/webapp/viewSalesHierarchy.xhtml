<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core" 
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<h:head>
<link rel="stylesheet" href="#{request.contextPath}/styles/wizard_style.css" type="text/css" />
<link rel="stylesheet" href="#{request.contextPath}/styles/tpc.css" type="text/css" />
<link rel="stylesheet" href="#{request.contextPath}/styles/style_js.css" type="text/css" />
<meta name="title" content="Sales Hierarchy" />

<style>
.col {
	width: 33%;
}

.centercol {
	width: 33%;
	text-align: center;
}

#content_wrap table {
	margin: 0px auto;
}
</style>


</h:head>
<h:body>
	<f:view>
	 <f:event type="preRenderView" listener="#{viewSaleHierarchyActionBean.clearAllSessionObjects}"></f:event>
	
		<h:form id="myform">

			<div id="wizard_group">
				<table width="100%" border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td id="header_wizard"><h1>Sales Hierarchy</h1></td>
					</tr>
					<tr>
						<td>
							<div id="status_bar_top">
								<table width="100%" border="0" cellspacing="0" cellpadding="0">
									<tr>
										<td width="70%" valign="top" align="left">&nbsp;</td>
										<td width="30%" valign="top" align="right">
											<a4j:outputPanel id="icons_div" styleClass="icons_div" style="display:block;float:right;">
												<h:outputText value=" " />
												<h:commandButton action="#{viewSaleHierarchyActionBean.editSalesHierarchy}"
												 rendered="#{viewSaleHierarchyActionBean.salesHierarchyModel.bankUserId != null}" 
													image="/images/ah_images/edit_bar_icon.png" styleClass="icon_clear" id="editSalesHierarchy" title="Edit Sales Hierarchy">
													<f:param name="saleUserId" value="#{viewSaleHierarchyActionBean.salesHierarchyModel.bankUserId}" />
												</h:commandButton>
											</a4j:outputPanel>
										</td>
									</tr>
								</table>
							</div>
							<div class="clear"></div>
						</td>
					</tr>

					<tr>
						<td>
							<div id="content_wrap">
								<div class="row,error_text_red" style="margin-left: 30px">
									<a4j:outputPanel ajaxRendered="true">
										<a4j:outputPanel styleClass="error_cont"
											rendered="#{! empty facesContext.maximumSeverity}">
											<a4j:outputPanel>
												<a4j:outputPanel styleClass="error_txt">
													<h:messages globalOnly="true" />
												</a4j:outputPanel>
											</a4j:outputPanel>
										</a4j:outputPanel>
									</a4j:outputPanel>
								</div>
								<table width="90%" border="0" align="center" cellpadding="0"
									cellspacing="10" class="fieldset_tree">
									<tr>
										<td width="50%" valign="top">

											<fieldset style="margin: 0px; height: 444px;">
												<legend>Sales Hierarchy</legend>
												<rich:tree id="tree" 
					                                value="#{viewSaleHierarchyActionBean.saleUserNodes}" 
					                                var="item"
					                                render="saleUserName roleTitle parentSaleUserName ultimateParentSaleUserName empId isActive icons_div"
					                                selectionChangeListener="#{viewSaleHierarchyActionBean.processSaleUserSelection}" 
					                                selectionType="ajax"
					                                iconCollapsed="/images/ah_images/plus.png" 
					                                iconExpanded="/images/ah_images/minus.png" 
					                                icon="/images/ah_images/area.png" 
					                                iconLeaf="/images/ah_images/area.png"
					                                nodeType="SALE_USER_NODE"
					                                toggleType="client" >
					                                <rich:treeNode type="SALE_USER_NODE" iconExpanded="/images/ah_images/area.png" 
														iconCollapsed="/images/ah_images/area.png" iconLeaf="/images/ah_images/area.png" >
														<h:outputText value="#{item.name}" />
													</rich:treeNode>
					                             </rich:tree>
											</fieldset>

										</td>

										<td width="50%" valign="top">
											<fieldset style="margin: 0px; height: 444px;">
												<legend>Details</legend>
												<table width="" border="0" align="center" cellpadding="0"
													cellspacing="10">
													<tr>
														<td width="170" valign="top">Sale User:</td>
														<td width="200" align="left" valign="top">
																<h:inputText id="saleUserName" readonly="true" disabled="true"
																	value="#{viewSaleHierarchyActionBean.saleUserName}" 
																	styleClass="type_txt" />
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Role Title:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="roleTitle" readonly="true" disabled="true" value="#{viewSaleHierarchyActionBean.roleTitle}" styleClass="type_txt" />		
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Parent Sale User:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="parentSaleUserName" readonly="true" disabled="true" value="#{viewSaleHierarchyActionBean.parentSaleUserName}" styleClass="type_txt" />	
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Ultimate Parent Sale User:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="ultimateParentSaleUserName" readonly="true" disabled="true" value="#{viewSaleHierarchyActionBean.ultimateParentSaleUserName}" styleClass="type_txt" />		
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Employee Id:</td>
														<td width="200" align="left" valign="top">
															<h:inputText id="empId" readonly="true" disabled="true" value="#{viewSaleHierarchyActionBean.empId}" styleClass="type_txt" />	
														</td>
													</tr>
													<tr>
														<td width="170" valign="top">Active:</td>
														<td width="200" align="left" valign="top"><h:selectBooleanCheckbox
																id="isActive" disabled="true" 
																value="#{viewSaleHierarchyActionBean.active}"
																styleClass="type_check" /></td>
													</tr>
												</table>

											</fieldset>
										</td>
									</tr>
								</table>
							</div>
						</td>
					</tr>
					<tr>
						<td id="status_bar_bottom">
							<div>
								<a4j:outputPanel style=""
									styleClass="infoMessage" ajaxRendered="true">
									<h:outputText style="color:#0e385f;" value="#{infoMessage}" />
								</a4j:outputPanel>
							</div>
						</td>
					</tr>


					<tr>
						<td>
							<div id="footer"></div>
						</td>
					</tr>


				</table>
			</div>
		</h:form>
		<div class="status">
	  <a4j:status>
	    <f:facet name="start"  >
	      <h:graphicImage url="/images/ah_images/tabs_loader.gif" style="border:0px;"/>
	    </f:facet>
	    <f:facet name="stop"></f:facet>
	  </a4j:status>
	</div> 
	</f:view>
</h:body>
</html>